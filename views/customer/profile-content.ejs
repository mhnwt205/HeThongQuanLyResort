<!-- Profile Header -->
<section class="py-4 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="h3 mb-0">Thông tin cá nhân</h1>
                <p class="mb-0">Quản lý thông tin tài khoản của bạn</p>
            </div>
        </div>
    </div>
</section>

<!-- Profile Content -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <!-- Profile Card -->
                <div class="card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="fas fa-user-circle fa-5x text-primary"></i>
                        </div>
                        <h5 class="card-title"><%= user.firstName %> <%= user.lastName %></h5>
                        <p class="text-muted"><%= user.email %></p>
                        <p class="text-muted">Khách hàng VIP</p>
                        <div class="d-grid">
                            <button class="btn btn-outline-primary" onclick="editProfile()">
                                <i class="fas fa-edit me-2"></i>Chỉnh sửa
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="card mt-4">
                    <div class="card-body">
                        <h6 class="card-title">Thống kê</h6>
                        <div class="row text-center">
                            <div class="col-6">
                                <h4 class="text-primary">5</h4>
                                <small class="text-muted">Lần đặt phòng</small>
                            </div>
                            <div class="col-6">
                                <h4 class="text-success">4.8</h4>
                                <small class="text-muted">Đánh giá</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <!-- Profile Tabs -->
                <div class="card">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="profileTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab">
                                    <i class="fas fa-user me-2"></i>Thông tin cá nhân
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab">
                                    <i class="fas fa-lock me-2"></i>Bảo mật
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="bookings-tab" data-bs-toggle="tab" data-bs-target="#bookings" type="button" role="tab">
                                    <i class="fas fa-calendar me-2"></i>Đặt phòng
                                </button>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="card-body">
                        <div class="tab-content" id="profileTabContent">
                            <!-- Personal Info Tab -->
                            <div class="tab-pane fade show active" id="info" role="tabpanel">
                                <form id="profileForm">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="firstName" class="form-label">Họ</label>
                                            <input type="text" class="form-control" id="firstName" name="firstName" value="<%= user.firstName %>" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="lastName" class="form-label">Tên</label>
                                            <input type="text" class="form-control" id="lastName" name="lastName" value="<%= user.lastName %>" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="email" name="email" value="<%= user.email %>" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="phone" class="form-label">Số điện thoại</label>
                                            <input type="tel" class="form-control" id="phone" name="phone" value="<%= user.phone %>" readonly>
                                        </div>
                                        <div class="col-12">
                                            <label for="address" class="form-label">Địa chỉ</label>
                                            <textarea class="form-control" id="address" name="address" rows="3" readonly><%= user.address %></textarea>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="dateOfBirth" class="form-label">Ngày sinh</label>
                                            <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth" value="<%= user.dateOfBirth %>" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="gender" class="form-label">Giới tính</label>
                                            <select class="form-select" id="gender" name="gender" disabled>
                                                <option value="">Chọn giới tính</option>
                                                <option value="male" <%= user.gender === 'male' ? 'selected' : '' %>>Nam</option>
                                                <option value="female" <%= user.gender === 'female' ? 'selected' : '' %>>Nữ</option>
                                                <option value="other" <%= user.gender === 'other' ? 'selected' : '' %>>Khác</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mt-3" id="profileActions" style="display: none;">
                                        <button type="button" class="btn btn-primary" onclick="saveProfile()">
                                            <i class="fas fa-save me-2"></i>Lưu thay đổi
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary ms-2" onclick="cancelEdit()">
                                            <i class="fas fa-times me-2"></i>Hủy
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Security Tab -->
                            <div class="tab-pane fade" id="security" role="tabpanel">
                                <form id="passwordForm">
                                    <div class="row g-3">
                                        <div class="col-12">
                                            <label for="currentPassword" class="form-label">Mật khẩu hiện tại</label>
                                            <input type="password" class="form-control" id="currentPassword" name="currentPassword" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="newPassword" class="form-label">Mật khẩu mới</label>
                                            <input type="password" class="form-control" id="newPassword" name="newPassword" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="confirmPassword" class="form-label">Xác nhận mật khẩu mới</label>
                                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button type="submit" class="btn btn-warning">
                                            <i class="fas fa-key me-2"></i>Đổi mật khẩu
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Bookings Tab -->
                            <div class="tab-pane fade" id="bookings" role="tabpanel">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Mã đặt phòng</th>
                                                <th>Phòng</th>
                                                <th>Ngày nhận</th>
                                                <th>Ngày trả</th>
                                                <th>Tổng tiền</th>
                                                <th>Trạng thái</th>
                                                <th>Thao tác</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>#BK001</td>
                                                <td>Deluxe Ocean View</td>
                                                <td>15/01/2024</td>
                                                <td>18/01/2024</td>
                                                <td>7,500,000 VNĐ</td>
                                                <td><span class="badge bg-success">Đã xác nhận</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Xem chi tiết</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>#BK002</td>
                                                <td>Executive Suite</td>
                                                <td>20/01/2024</td>
                                                <td>22/01/2024</td>
                                                <td>9,000,000 VNĐ</td>
                                                <td><span class="badge bg-warning">Chờ xác nhận</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Xem chi tiết</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
function editProfile() {
    // Enable form fields
    document.querySelectorAll('#profileForm input, #profileForm textarea, #profileForm select').forEach(field => {
        field.removeAttribute('readonly');
        field.removeAttribute('disabled');
    });
    
    // Show action buttons
    document.getElementById('profileActions').style.display = 'block';
    
    // Hide edit button
    document.querySelector('button[onclick="editProfile()"]').style.display = 'none';
}

function cancelEdit() {
    // Disable form fields
    document.querySelectorAll('#profileForm input, #profileForm textarea, #profileForm select').forEach(field => {
        field.setAttribute('readonly', 'readonly');
        if (field.tagName === 'SELECT') {
            field.setAttribute('disabled', 'disabled');
        }
    });
    
    // Hide action buttons
    document.getElementById('profileActions').style.display = 'none';
    
    // Show edit button
    document.querySelector('button[onclick="editProfile()"]').style.display = 'block';
}

function saveProfile() {
    // Here you would implement the save functionality
    alert('Chức năng lưu thông tin sẽ được triển khai');
}

// Password form submission
document.getElementById('passwordForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (newPassword !== confirmPassword) {
        alert('Mật khẩu xác nhận không khớp');
        return;
    }
    
    // Here you would implement the password change functionality
    alert('Chức năng đổi mật khẩu sẽ được triển khai');
});
</script>
